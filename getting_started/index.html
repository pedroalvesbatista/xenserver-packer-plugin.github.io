<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Getting Started - Packer - Plugin Xen Server</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Getting Started";
        var mkdocs_page_input_path = "getting_started.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Packer - Plugin Xen Server
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Getting Started</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#status">Status</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#developing-the-builder">Developing the builder</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../config_ref/">Configuration Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Packer - Plugin Xen Server</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Getting Started</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="getting-started">Getting Started</h1>
<p>XenServer packer.io builder
This builder plugin extends packer.io to support building images for XenServer.</p>
<p>This is a fork of the original builder since the original project was abandoned and no longer compilied with recent versions of Go or worked with Xenserver 7.6 and later.</p>
<p>It improves the original project in the following ways:</p>
<ul>
<li>Developed alongside the Xenorchestra Terraform provider to ensure the hashicorp ecosystem is interoperable.</li>
<li>Reimplements how the boot commands are sent over VNC to be compatible with later versions of Xenserver (Citrix hypervisor) and XCP</li>
</ul>
<h4 id="status">Status</h4>
<p>At the time of this writing the <code>packer</code> builder has been verified to work with Xenserver 7.6 and can launch VMs with the packer output through the Xen Orchestra Terraform provider.</p>
<p>The following list contains things that are incomplete but will be worked on soon:</p>
<ul>
<li>The documentation is still in an inconsistent state with upstream</li>
<li>XVA builder is untested</li>
<li>Lots of dead code to remove from upstream</li>
<li>Using the builder</li>
<li>The packer builder can be installed via <code>packer init</code> as long as the packer template includes the following in it's <code>pkr.hcl</code> file</li>
</ul>
<pre><code>packer {
  required_plugins {
   xenserver= {
      version = &quot;&gt;= v0.3.2&quot;
      source = &quot;github.com/ddelnano/xenserver&quot;
    }
  }
}

</code></pre>
<p>The following command will install the packer plugin using the Ubuntu example provided in this repository :</p>
<p><code>packer init examples/ubuntu/ubuntu-2004.pkr.hcl</code></p>
<p>If you are using an older version of Packer or are still using json templates you will need to download the relevant release from the project's releases page and copy the binary to <code>~/.packer.d/plugins/packer-builder-xenserver-iso</code>.</p>
<h4 id="developing-the-builder">Developing the builder</h4>
<table>
<thead>
<tr>
<th>Dependencies</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Packer</td>
<td><code>&gt;= v1.7.1</code></td>
</tr>
<tr>
<td>XenServer / Citrix Hypervisor</td>
<td><code>&gt; 7.6</code></td>
</tr>
<tr>
<td>Golang</td>
<td><code>1.16</code></td>
</tr>
</tbody>
</table>
<p>Compile the plugin</p>
<p>Once you have installed Packer, you must compile this plugin and install the resulting binary.</p>
<p><code>$ go build -o packer-plugin-xenserver</code></p>
<h1 id="add-the-builder-to-the-location-packer-expects-it-to-be-installed-in">Add the builder to the location packer expects it to be installed in</h1>
<pre><code>$ mkdir -p ~/.packer.d/plugins/
$ cp builder-xenserver-iso  ~/.packer.d/plugins/packer-builder-xenserver-iso
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Welcome"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../config_ref/" class="btn btn-neutral float-right" title="Configuration Reference">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../config_ref/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
